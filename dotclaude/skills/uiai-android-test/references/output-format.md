# Output Format Template

ãƒ†ã‚¹ãƒˆçµæœã®å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå®šç¾©ã€‚
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã“ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã£ã¦çµæœã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã€‚

## ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›

### çµæœã‚µãƒãƒªãƒ¼

```
## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå®Œäº†

### çµæœã‚µãƒãƒªãƒ¼

| é …ç›® | çµæœ |
|------|------|
| ã‚·ãƒŠãƒªã‚ª | <scenario_name> |
| ãƒ‡ãƒã‚¤ã‚¹ | <device_serial> |
| ç·ã‚¹ãƒ†ãƒƒãƒ— | <total> |
| ãƒ‘ã‚¹ | <passed> (<pass_rate>%) |
| è¦ç¢ºèª | <inconclusive> (<inconclusive_rate>%) |
| å¤±æ•— | <failed> (<fail_rate>%) |

### ã‚¹ãƒ†ãƒƒãƒ—åˆ¥çµæœ

| # | Section | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | æ¤œè¨¼ | çµæœ |
|---|---------|-----------|------|------|
| 1 | <section> | <action> | <then_or_dash> | âœ… PASS |
| 2 | <section> | <action> | - | - |
| 3 | <section> | <action> | <then> | âš ï¸ INCONCLUSIVE |
| 4 | <section> | <action> | <then> | âŒ FAIL |
```

### è¦ç¢ºèªãƒ»å¤±æ•—ã®è©³ç´°ï¼ˆé‡è¦ï¼‰

**è¦ç¢ºèªï¼ˆINCONCLUSIVEï¼‰ã¾ãŸã¯å¤±æ•—ï¼ˆFAILï¼‰ãŒã‚ã‚‹å ´åˆã¯å¿…ãšè©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚**

```
### âš ï¸ è¦ç¢ºèªé …ç›®ã®è©³ç´°

#### Step <N>: <action>

**æ¤œè¨¼å†…å®¹**: <then ã®å†…å®¹>

**åˆ¤å®š**: âš ï¸ INCONCLUSIVE

**ç†ç”±**:
<ãªãœåˆ¤å®šã§ããªã‹ã£ãŸã‹ã®è©³ç´°èª¬æ˜>

**ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ**: `step_<N>_after.png`

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
- <æ‰‹å‹•ã§ç¢ºèªã™ã¹ãç‚¹1>
- <æ‰‹å‹•ã§ç¢ºèªã™ã¹ãç‚¹2>

---

### âŒ å¤±æ•—é …ç›®ã®è©³ç´°

#### Step <N>: <action>

**æ¤œè¨¼å†…å®¹**: <then ã®å†…å®¹>

**åˆ¤å®š**: âŒ FAIL

**æœŸå¾…**: <æœŸå¾…ã—ãŸçŠ¶æ…‹>

**å®Ÿéš›**: <å®Ÿéš›ã®çŠ¶æ…‹>

**ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ**: `step_<N>_after.png`

---
```

### å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
### å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

<output_dir>/
â”œâ”€â”€ summary.md              # ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ
â””â”€â”€ <scenario_name>/
    â”œâ”€â”€ result.json         # è©³ç´°çµæœJSON
    â”œâ”€â”€ report.md           # æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ step_01_before.png  # ã‚¹ãƒ†ãƒƒãƒ—1å®Ÿè¡Œå‰
    â”œâ”€â”€ step_01_after.png   # ã‚¹ãƒ†ãƒƒãƒ—1å®Ÿè¡Œå¾Œ
    â”œâ”€â”€ step_01_uitree.xml  # ã‚¹ãƒ†ãƒƒãƒ—1 UIãƒ„ãƒªãƒ¼
    â””â”€â”€ ...
```

## çµæœã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | è¨˜å· | æ„å‘³ |
|-----------|------|------|
| PASS | âœ… | æ¤œè¨¼æˆåŠŸï¼ˆæœŸå¾…é€šã‚Šï¼‰ |
| INCONCLUSIVE | âš ï¸ | è¦ç¢ºèªï¼ˆåˆ¤å®šã§ããšï¼‰ |
| FAIL | âŒ | æ¤œè¨¼å¤±æ•—ï¼ˆæœŸå¾…ã¨ç•°ãªã‚‹ï¼‰ |
| SKIPPED | â­ï¸ | ã‚¹ã‚­ãƒƒãƒ—ï¼ˆæ¤œè¨¼ãªã—ï¼‰ |
| REPLAYED | ğŸ”„ | ãƒªãƒ—ãƒ¬ã‚¤å®Ÿè¡Œå®Œäº† |

## æ¤œè¨¼æ–¹æ³•

| æ–¹æ³• | èª¬æ˜ | strictã‚ªãƒ—ã‚·ãƒ§ãƒ³ |
|------|------|------------------|
| `vision` | Vision APIã§æ„å‘³çš„ã«åˆ¤å®š | `false`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| `strict_match` | UIãƒ„ãƒªãƒ¼ã®ãƒ†ã‚­ã‚¹ãƒˆå®Œå…¨ä¸€è‡´ | `true` |

### strictã®é©ç”¨å˜ä½

`strict` ã¯ `do` ã¨ `then` ã«**å€‹åˆ¥æŒ‡å®š**ã§ãã‚‹ï¼š

| æŒ‡å®šå ´æ‰€ | å½±éŸ¿ |
|----------|------|
| `config.strict` | å…¨ do/then ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| `do.strict` | ãã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¦ç´ ç‰¹å®šæ–¹æ³• |
| `then.strict` | ãã®æ¤œè¨¼ã®åˆ¤å®šæ–¹æ³• |

**å„ªå…ˆé †ä½**: å€‹åˆ¥æŒ‡å®š > config.strict > falseï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

## report.md ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

å„ã‚·ãƒŠãƒªã‚ªã® `report.md` ã¯ä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ï¼š

```markdown
# Test Report: <scenario_name>

## æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| ã‚·ãƒŠãƒªã‚ª | <name> |
| å®Ÿè¡Œæ—¥æ™‚ | <timestamp> |
| ãƒ‡ãƒã‚¤ã‚¹ | <device> |
| å®Ÿè¡Œæ™‚é–“ | <duration> |

## çµæœã‚µãƒãƒªãƒ¼

| çµæœ | ä»¶æ•° | å‰²åˆ |
|------|------|------|
| âœ… PASS | <n> | <rate>% |
| âš ï¸ INCONCLUSIVE | <n> | <rate>% |
| âŒ FAIL | <n> | <rate>% |
| **åˆè¨ˆ** | <total> | - |

## ã‚¹ãƒ†ãƒƒãƒ—è©³ç´°

### Step 1: <action>

**Section**: <section_id>

**æ¤œè¨¼**: <then_content ã¾ãŸã¯ "ãªã—">

**çµæœ**: âœ… PASS / âš ï¸ INCONCLUSIVE / âŒ FAIL

**è©³ç´°**:
<åˆ¤å®šç†ç”±ã‚„ç¢ºèªäº‹é …>

**Evidence**:
- Before: ![](./step_01_before.png)
- After: ![](./step_01_after.png)

---

### Step 2: ...

ï¼ˆä»¥ä¸‹åŒæ§˜ï¼‰

---

## è¦ç¢ºèªé …ç›®

> ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ INCONCLUSIVE ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤º

### Step <N>: <action>

**æ¤œè¨¼å†…å®¹**: <then>

**è¦ç¢ºèªç†ç”±**:
<è©³ç´°ãªç†ç”±>

**æ‰‹å‹•ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
1. <ç¢ºèªã™ã¹ãç‚¹1>
2. <ç¢ºèªã™ã¹ãç‚¹2>

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«**:
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ: `step_<N>_after.png`
- UIãƒ„ãƒªãƒ¼: `step_<N>_uitree.xml`

---

## å¤±æ•—é …ç›®

> ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ FAIL ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤º

### Step <N>: <action>

**æ¤œè¨¼å†…å®¹**: <then>

**æœŸå¾…**: <expected>

**å®Ÿéš›**: <actual>

**æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:
- <ä¿®æ­£æ¡ˆã‚„èª¿æŸ»ãƒã‚¤ãƒ³ãƒˆ>

---

## ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ |
|---------|------|
| result.json | æ©Ÿæ¢°å¯èª­ãªå®Ÿè¡Œçµæœ |
| step_01_before.png | Step 1 å®Ÿè¡Œå‰ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ |
| step_01_after.png | Step 1 å®Ÿè¡Œå¾Œã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ |
| step_01_uitree.xml | Step 1 UIãƒ„ãƒªãƒ¼ |
| ... | ... |
```

## result.json ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```json
{
  "scenario": {
    "name": "ã‚·ãƒŠãƒªã‚ªå",
    "file": "path/to/scenario.yaml"
  },
  "device": {
    "serial": "emulator-5554",
    "model": "Pixel 6",
    "android_version": "13",
    "screen_size": "1080x2400"
  },
  "execution": {
    "start_time": "2026-01-29T10:00:00Z",
    "end_time": "2026-01-29T10:01:30Z",
    "duration_ms": 90000
  },
  "summary": {
    "total_steps": 5,
    "passed": 4,
    "inconclusive": 1,
    "failed": 0,
    "pass_rate": 80
  },
  "steps": [
    {
      "index": 1,
      "section": "èµ·å‹•",
      "action_type": "do",
      "action": "ã‚¢ãƒ—ãƒªã‚’èµ·å‹•",
      "strict": false,               // ã“ã®doã®å³æ ¼ãƒ¢ãƒ¼ãƒ‰
      "status": "passed",
      "execution": {
        "method": "vision",          // ã¾ãŸã¯ "strict_match"
        "result": "passed",
        "reason": "ã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«èµ·å‹•ã—ã¾ã—ãŸ"
      },
      "evidence": {
        "screenshot_before": "step_01_before.png",
        "screenshot_after": "step_01_after.png",
        "uitree": "step_01_uitree.xml"
      }
    },
    {
      "index": 2,
      "section": "ãƒªãƒ—ãƒ¬ã‚¤ç¢ºèª",
      "action_type": "replay",
      "replay": {
        "from": "ãƒ­ã‚°ã‚¤ãƒ³",
        "to": "ãƒ‡ãƒ¼ã‚¿å…¥åŠ›"
      },
      "status": "passed",
      "replayed_steps": [
        {
          "section": "ãƒ­ã‚°ã‚¤ãƒ³",
          "actions": [
            { "do": "ã‚¢ãƒ—ãƒªã‚’èµ·å‹•", "status": "passed" },
            { "do": "ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—", "status": "passed" }
          ]
        },
        {
          "section": "ãƒ‡ãƒ¼ã‚¿å…¥åŠ›",
          "actions": [
            { "do": "å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ã", "status": "passed" },
            { "do": "ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›", "status": "passed" }
          ]
        }
      ],
      "evidence": {
        "screenshot_before": "step_02_before.png",
        "screenshot_after": "step_02_after.png",
        "uitree": "step_02_uitree.xml"
      }
    },
    {
      "index": 2,
      "section": "èµ·å‹•",
      "action_type": "then",
      "action": "ãƒ›ãƒ¼ãƒ ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨",
      "strict": false,               // ã“ã®thenã®å³æ ¼ãƒ¢ãƒ¼ãƒ‰
      "status": "passed",
      "verification": {
        "method": "vision",           // ã¾ãŸã¯ "strict_match"
        "result": "passed",
        "reason": "ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒç¢ºèªã§ãã¾ã™"
      },
      "evidence": {
        "screenshot_after": "step_02_after.png",
        "uitree": "step_02_uitree.xml"
      }
    },
    {
      "index": 5,
      "section": "å¤‰æ›´ç¢ºèª",
      "action_type": "then",
      "action": "ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã€Œæ±äº¬æœ¬ç¤¾ã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨",
      "strict": true,                // ã“ã®thenã¯å³æ ¼ãƒ¢ãƒ¼ãƒ‰
      "status": "inconclusive",
      "verification": {
        "method": "strict_match",
        "result": "inconclusive",
        "reason": "ãƒ˜ãƒƒãƒ€ãƒ¼é ˜åŸŸã«æ‹ ç‚¹åãŒè¡¨ç¤ºã•ã‚Œã‚‹ä»•çµ„ã¿ãŒç¾åœ¨ã®UIã§ã¯ç¢ºèªã§ãã¾ã›ã‚“",
        "manual_check_points": [
          "ã‚¢ãƒ—ãƒªã®è¨­è¨ˆä¸Šã€ãƒ˜ãƒƒãƒ€ãƒ¼ã«æ‹ ç‚¹åã‚’è¡¨ç¤ºã™ã‚‹ä»•æ§˜ã‹ã©ã†ã‹ç¢ºèª",
          "åˆ¥ã®ç”»é¢ã§æ‹ ç‚¹åãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª"
        ]
      },
      "evidence": {
        "screenshot_before": "step_05_before.png",
        "screenshot_after": "step_05_after.png",
        "uitree": "step_05_uitree.xml"
      }
    }
  ]
}
```

## æ³¨æ„äº‹é …

1. **è¦ç¢ºèªï¼ˆINCONCLUSIVEï¼‰ã¯å¿…ãšè©³ç´°ã‚’å‡ºã™**
   - ä½•ãŒåˆ¤å®šã§ããªã‹ã£ãŸã‹
   - ãªãœåˆ¤å®šã§ããªã‹ã£ãŸã‹
   - æ‰‹å‹•ã§ç¢ºèªã™ã¹ããƒã‚¤ãƒ³ãƒˆ

2. **å¤±æ•—ï¼ˆFAILï¼‰ã¯æœŸå¾…ã¨å®Ÿéš›ã‚’æ˜è¨˜**
   - æœŸå¾…ã—ãŸçŠ¶æ…‹
   - å®Ÿéš›ã®çŠ¶æ…‹
   - æ¨å¥¨ã•ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

3. **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¸ã®å‚ç…§ã‚’å¿…ãšå«ã‚ã‚‹**
   - çµæœã‚’ç›®è¦–ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

4. **å‡ºåŠ›ã¯æ—¥æœ¬èªã§çµ±ä¸€**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèª­ã¿ã‚„ã™ã„ã‚ˆã†ã«
