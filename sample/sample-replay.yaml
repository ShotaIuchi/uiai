name: "リプレイ機能テスト"
app: "com.example.app"

config:
  clear_data_before: true

steps:
  # ----------------------------------------------------------------------------
  # 基本操作
  # ----------------------------------------------------------------------------
  - id: "起動"
    actions:
      - do: "アプリを起動"
      - then: "ホーム画面が表示されていること"

  - id: "ログイン"
    actions:
      - do: "メニューをタップ"
      - do: "「ログイン」をタップ"
      - do: "メールアドレス欄に「test@example.com」を入力"
      - do: "パスワード欄に「password123」を入力"
      - do: "「ログイン」ボタンをタップ"
      - then: "ホーム画面に戻っていること"

  - id: "データ入力"
    actions:
      - do: "「新規作成」をタップ"
      - do: "タイトル欄に「テストデータ」を入力"
      - do: "「保存」をタップ"
      - then: "「テストデータ」がリストに表示されていること"

  # ----------------------------------------------------------------------------
  # リプレイテスト: 単一セクション
  # ----------------------------------------------------------------------------
  - id: "ログイン再実行"
    replay:
      from: "ログイン"
      to: "ログイン"
    actions:
      - then: "ログイン状態が維持されていること"

  # ----------------------------------------------------------------------------
  # リプレイテスト: 範囲指定
  # ----------------------------------------------------------------------------
  - id: "全体リプレイ"
    replay:
      from: "起動"
      to: "データ入力"
    actions:
      - then: "一連の操作が正常に完了していること"
      - then: "「テストデータ」がリストに表示されていること"
